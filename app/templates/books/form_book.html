{% extends 'base.html' %}
{% set form_title = 'Adicionar Novo Livro' if not book else 'Editar Livro' %}
{% block title %}{{ form_title }}{% endblock %}
{% block content %}
<h1>{{ form_title }}</h1>

<form method="POST">
    <div class="mb-3">
        <label for="title" class="form-label">Título</label>
        <input type="text" class="form-control" id="title" name="title" value="{{ book.title if book else '' }}" required />
    </div>
    <div class="mb-3">
        <label for="author_id" class="form-label">Autor</label>
        <select class="form-select" id="author_id" name="author_id" required>
            <option value="">Selecione um autor</option>
            {% for author in authors %}
            <option value="{{ author.id }}" {% if book and book.author_id == author.id %}selected{% endif %}>
                {{ author.name }}
            </option>
            {% endfor %}
        </select>
    </div>
    <div class="row">
        <div class="col-md-6 mb-3">
            <label for="publication_year" class="form-label">Ano de Publicação</label>
            <input type="number" class="form-control" id="publication_year" name="publication_year" value="{{ book.publication_year if book else '' }}" />
        </div>
        <div class="col-md-6 mb-3">
            <label for="critic_score" class="form-label">Nota da Crítica (0-10)</label>
            <input type="number" step="0.1" min="0" max="10" class="form-control" id="critic_score" name="critic_score" value="{{ book.critic_score if book else '' }}" />
        </div>
    </div>
    <div class="mb-3">
        <label for="cover_image_url" class="form-label">URL da Imagem da Capa</label>
        <input type="url" class="form-control" id="cover_image_url" name="cover_image_url" value="{{ book.cover_image_url if book else '' }}" />
    </div>
    <div class="mb-3">
        <label for="review" class="form-label">Resenha</label>
        <textarea class="form-control" id="review" name="review" rows="4">{{ book.review if book else '' }}</textarea>
    </div>

    <button type="submit" class="btn btn-primary">Salvar</button>
    <a href="{{ url_for('main.list_books') }}" class="btn btn-secondary">Cancelar</a>
</form>
{% endblock %}